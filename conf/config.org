#+TITLE: My Emacs Configuration
#+AUTHOR: Samuel Nilsson
#+EMAIL: samuel@samuelnilsson.net
#+OPTIONS: num:nil

* UI

Only eval UI related configuration when creating a frame.

#+begin_src emacs-lisp
(defun new-frame-setup (frame)
  (when (display-graphic-p frame)
#+end_src

** Disable unused ui elements

#+begin_src emacs-lisp
(setq inhibit-startup-message t) ; Disable the startup message

(menu-bar-mode -1)    ; Disable the menu bar
(tool-bar-mode -1)    ; Disable toolbar
(scroll-bar-mode -1)  ; Disable visible scrollbar
(set-fringe-mode 10)  ; Give some breathing room
#+end_src

** Font

*** Set the font

#+begin_src emacs-lisp
  (set-face-attribute 'default nil :font "Iosevka Nerd Font" :height @fontSize@)
  (set-face-attribute 'fixed-pitch nil :font "Iosevka Nerd Font" :height @fontSize@)
  (set-face-attribute 'variable-pitch nil :font "Iosevka Aile" :height @fontSize@)

  (defun set-buffer-variable-pitch ()
    (interactive)
    (variable-pitch-mode t)
    (set-face-attribute 'org-table nil :inherit 'fixed-pitch)
    (set-face-attribute 'org-link nil :inherit 'fixed-pitch)
    (set-face-attribute 'org-code nil :inherit 'fixed-pitch)
    (set-face-attribute 'org-block nil :inherit 'fixed-pitch)
    (set-face-attribute 'org-date nil :inherit 'fixed-pitch)
    (set-face-attribute 'org-special-keyword nil :inherit 'fixed-pitch))

  (add-hook 'org-mode-hook 'set-buffer-variable-pitch)
#+end_src

*** Ligatures

Ligatures are enabled using the ligature.el package, since support is not built into emacs.

#+begin_src emacs-lisp
(use-package ligature
  :config
  (ligature-set-ligatures 'prog-mode '("<---" "<--"  "<<-" "<-" "->" "-->" "--->" "<->" "<-->" "<--->" "<---->" "<!--"
                                       "<==" "<===" "<=" "=>" "=>>" "==>" "===>" ">=" "<=>" "<==>" "<===>" "<====>" "<!---"
                                       "<~~" "<~" "~>" "~~>" "::" ":::" "==" "!=" "===" "!=="
                                       ":=" ":-" ":+" "<*" "<*>" "*>" "<|" "<|>" "|>" "+:" "-:" "=:" "<******>" "++" "+++"))
  (global-ligature-mode t))
#+end_src

** Theme

Set the catppuccin macchiato theme to not burn my eyes.

#+begin_src emacs-lisp
(load-theme 'catppuccin :no-confirm)
(setq catppuccin-flavor 'macchiato)
(catppuccin-reload)
#+end_src

** Eval UI on new frame

Eval new-frame-setup function on existing frames and when new frames are created.

#+begin_src emacs-lisp
))
(mapc 'new-frame-setup (frame-list))
(add-hook 'after-make-frame-functions 'new-frame-setup)
#+end_src

* Keybindings

Enable vi-like keybindings by using evil mode.

#+begin_src emacs-lisp
(require 'evil)
(evil-mode 1)
#+end_src

* Completion

** UI

Use vertico plugin as completion UI

#+begin_src emacs-lisp
(use-package vertico
  :init
  (vertico-mode))

(use-package savehist
  :init
  (savehist-mode))
#+end_src

** Annotations

Add completion annotations from marginalia package

#+begin_src emacs-lisp
(use-package marginalia
  :bind (:map minibuffer-local-map
         ("M-A" . marginalia-cycle))

  :init
  (marginalia-mode))
#+end_src

** Fuzzy

Enable matching of space separated patterns using orderless

#+begin_src emacs-lisp
(use-package orderless
  :custom
  (completion-styles '(orderless basic))
  (completion-category-overrides '((file (styles basic partial-completion)))))
#+end_src

